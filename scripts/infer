#!/usr/local/bin/coffee
# inference command line interface

l = require '../src/loader.coffee'
m = require '../src/mmd.coffee'
i = require '../src/infer.coffee'

main = (argv) ->
  if !argv[1]?
    console.log "Usage: #{argv[0]} FILE [ FILE ... ]"
    return

  sherlock = new i.Inferrer()

  for file in argv.slice 1
    sherlock.analyze m l file

  console.log JSON.stringify { inodes: sherlock.inodes_by_name, leaves: sherlock.leaves_by_name }, null, 2

main process.argv.slice 1
